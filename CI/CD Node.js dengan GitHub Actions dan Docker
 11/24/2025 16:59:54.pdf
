````md
<div align="center">

<h1>ðŸ”¥ Membuat CI/CD Pipeline Menggunakan GitHub Actions dan Docker untuk Aplikasi Node.js ðŸ”¥</h1>
<p><i>Panduan teknis lengkap yang dibuat secara otomatis.</i></p>
<img src="https://img.shields.io/badge/Type-IT Tutorial-blue?style=flat-square"/>
<img src="https://img.shields.io/badge/Skill Level-Intermediate%2FAdvanced-purple?style=flat-square"/>

</div>

---

## ðŸ§  Apa Yang Akan Kamu Pelajari?

- ðŸš€ Memahami konsep dasar CI/CD (Continuous Integration/Continuous Deployment).
- ðŸ³ Menggunakan Docker untuk containerize aplikasi Node.js.
- âš™ï¸ Mengkonfigurasi GitHub Actions untuk otomatisasi build, test, dan deployment.
- â˜ï¸ Melakukan deployment aplikasi Node.js ke platform cloud (contoh: Heroku, AWS).
- ðŸ›¡ï¸ Menerapkan praktik terbaik untuk keamanan dan efisiensi pipeline CI/CD.

---

## ðŸ“Œ Introduction

Halo! Selamat datang di panduan lengkap tentang cara membuat CI/CD pipeline menggunakan GitHub Actions dan Docker untuk aplikasi Node.js. Dalam era pengembangan perangkat lunak modern, otomatisasi adalah kunci untuk meningkatkan produktivitas, mengurangi kesalahan manusia, dan mempercepat siklus rilis. CI/CD pipeline adalah serangkaian langkah otomatis yang dijalankan setiap kali ada perubahan pada kode, mulai dari build, pengujian, hingga deployment ke lingkungan produksi.

Mengapa CI/CD penting? CI/CD membantu tim pengembang untuk:

*   **Integrasi Kode Lebih Cepat dan Lebih Sering:** Dengan otomatisasi, pengembang dapat menggabungkan perubahan kode secara teratur tanpa takut merusak aplikasi.
*   **Pengujian Otomatis:** Pipeline CI/CD menjalankan serangkaian pengujian secara otomatis untuk memastikan kualitas kode dan mencegah bug masuk ke produksi.
*   **Deployment yang Cepat dan Handal:** Proses deployment yang terotomatisasi memastikan aplikasi dapat di-deploy dengan cepat dan konsisten ke berbagai lingkungan.
*   **Feedback Loop yang Lebih Cepat:** Dengan otomatisasi pengujian dan deployment, tim pengembang dapat menerima feedback lebih cepat tentang perubahan yang mereka buat.

Dalam tutorial ini, kita akan fokus pada penggunaan GitHub Actions dan Docker. GitHub Actions adalah platform CI/CD yang terintegrasi langsung dengan repositori GitHub Anda, memungkinkan Anda untuk mengotomatiskan alur kerja pengembangan perangkat lunak Anda. Docker, di sisi lain, memungkinkan Anda untuk mengemas aplikasi Anda dan semua dependensinya ke dalam container, yang memastikan bahwa aplikasi berjalan konsisten di berbagai lingkungan.

**Why Docker?**

Docker enables packaging your application and its dependencies into a container, ensuring consistency across different environments. This eliminates the common "it works on my machine" problem and simplifies deployment.

**Why GitHub Actions?**

GitHub Actions is a powerful CI/CD platform directly integrated with your GitHub repository. It offers a flexible and customizable way to automate your software development workflows. Plus, it's free for public repositories and offers generous free tiers for private repositories.

Jadi, mari kita mulai perjalanan kita untuk membangun CI/CD pipeline yang kuat untuk aplikasi Node.js Anda! Siap? Mari kita mulai! ðŸ’ª

---

## âš™ï¸ Requirements

Berikut adalah persyaratan yang perlu Anda penuhi sebelum memulai:

-   **OS:** Sistem operasi apa pun (Windows, macOS, Linux)
-   **Software:**
    *   Node.js dan npm (Node Package Manager) terinstal
    *   Docker terinstal dan berjalan
    *   Akun GitHub
    *   Text editor atau IDE (Visual Studio Code, Sublime Text, dll.)
-   **Prior Knowledge:**
    *   Pemahaman dasar tentang JavaScript dan Node.js
    *   Pengetahuan dasar tentang Docker dan containerization
    *   Pengetahuan dasar tentang Git dan GitHub
-   **Optional Tools:**
    *   Heroku CLI (jika Anda ingin melakukan deployment ke Heroku)
    *   AWS CLI (jika Anda ingin melakukan deployment ke AWS)

---

## ðŸ§± Step-by-Step Guide

### **Step 1 â€” Membuat Aplikasi Node.js Sederhana**

Pertama, kita akan membuat aplikasi Node.js sederhana yang akan kita containerize dengan Docker dan kita deploy menggunakan GitHub Actions.

1.  **Buat Direktori Proyek:**

    Buka terminal atau command prompt Anda dan buat direktori proyek baru:

    ```bash
    mkdir node-docker-cicd
    cd node-docker-cicd
    ```

2.  **Inisialisasi Proyek Node.js:**

    Inisialisasi proyek Node.js dengan menjalankan perintah berikut:

    ```bash
    npm init -y
    ```

    Ini akan membuat file `package.json` di direktori proyek Anda.

3.  **Instal Express.js:**

    Kita akan menggunakan Express.js sebagai framework web untuk aplikasi kita. Instal Express.js dengan menjalankan perintah berikut:

    ```bash
    npm install express
    ```

4.  **Buat File `index.js`:**

    Buat file `index.js` di direktori proyek Anda dan tambahkan kode berikut:

    ```javascript
    const express = require('express');
    const app = express();
    const port = process.env.PORT || 3000;

    app.get('/', (req, res) => {
      res.send('Halo Dunia dari Node.js!');
    });

    app.listen(port, () => {
      console.log(`Aplikasi berjalan di port ${port}`);
    });
    ```

    Kode ini membuat server Express.js sederhana yang mendengarkan pada port yang ditentukan (atau port 3000 jika tidak ada port yang ditentukan dalam environment variable). Ketika Anda mengakses root URL (`/`), server akan mengirimkan pesan "Halo Dunia dari Node.js!".

5.  **Jalankan Aplikasi:**

    Jalankan aplikasi dengan perintah berikut:

    ```bash
    node index.js
    ```

    Buka browser Anda dan akses `http://localhost:3000`. Anda akan melihat pesan "Halo Dunia dari Node.js!".

    **Tip:** Pastikan Node.js dan npm sudah terinstal dengan benar. Jika belum, unduh dan instal dari situs web resmi Node.js.

### **Step 2 â€” Dockerize Aplikasi Node.js**

Selanjutnya, kita akan membuat Dockerfile untuk containerize aplikasi Node.js kita.

1.  **Buat File `Dockerfile`:**

    Buat file bernama `Dockerfile` (tanpa ekstensi) di direktori proyek Anda dan tambahkan kode berikut:

    ```dockerfile
    # Gunakan Node.js sebagai base image
    FROM node:16-alpine

    # Set working directory di dalam container
    WORKDIR /app

    # Salin file package.json dan package-lock.json (jika ada)
    COPY package*.json ./

    # Instal dependensi Node.js
    RUN npm install

    # Salin seluruh source code aplikasi
    COPY . .

    # Expose port aplikasi
    EXPOSE 3000

    # Jalankan aplikasi
    CMD ["node", "index.js"]
    ```

    Mari kita bahas setiap baris dalam Dockerfile:

    *   `FROM node:16-alpine`: Menggunakan Node.js versi 16 dengan base image Alpine Linux yang ringan.
    *   `WORKDIR /app`: Menentukan direktori kerja di dalam container.
    *   `COPY package*.json ./`: Menyalin file `package.json` dan `package-lock.json` ke dalam container.
    *   `RUN npm install`: Menginstal dependensi Node.js.
    *   `COPY . .`: Menyalin seluruh source code aplikasi ke dalam container.
    *   `EXPOSE 3000`: Mengekspos port 3000 agar dapat diakses dari luar container.
    *   `CMD ["node", "index.js"]`: Menjalankan aplikasi Node.js saat container dijalankan.

2.  **Buat File `.dockerignore`:**

    Buat file bernama `.dockerignore` di direktori proyek Anda dan tambahkan kode berikut:

    ```
    node_modules
    .git
    ```

    File `.dockerignore` berfungsi untuk mengecualikan file atau direktori tertentu agar tidak disalin ke dalam container. Dalam kasus ini, kita mengecualikan direktori `node_modules` dan `.git` karena kita tidak memerlukannya di dalam container.

3.  **Bangun Docker Image:**

    Buka terminal atau command prompt Anda dan jalankan perintah berikut untuk membangun Docker image:

    ```bash
    docker build -t node-app .
    ```

    Perintah ini akan membangun Docker image dengan nama `node-app` dari Dockerfile yang ada di direktori saat ini.

4.  **Jalankan Docker Container:**

    Jalankan Docker container dari image yang baru saja Anda bangun:

    ```bash
    docker run -p 3000:3000 node-app
    ```

    Perintah ini akan menjalankan container dan memetakan port 3000 dari container ke port 3000 di host machine Anda.

    Buka browser Anda dan akses `http://localhost:3000`. Anda akan melihat pesan "Halo Dunia dari Node.js!".

    **Tip:** Pastikan Docker sudah terinstal dan berjalan sebelum Anda menjalankan perintah-perintah di atas. Anda dapat mengunduh dan menginstal Docker dari situs web resmi Docker.

### **Step 3 â€” Membuat Repositori GitHub**

1.  **Buat Repositori Baru:**

    Buka GitHub dan buat repositori baru. Beri nama repositori Anda (misalnya, `node-docker-cicd`).

2.  **Inisialisasi Git:**

    Kembali ke terminal atau command prompt Anda, inisialisasi Git di direktori proyek Anda:

    ```bash
    git init
    ```

3.  **Tambahkan File dan Commit:**

    Tambahkan semua file ke staging area dan commit perubahan:

    ```bash
    git add .
    git commit -m "Initial commit"
    ```

4.  **Hubungkan ke Repositori GitHub:**

    Hubungkan repositori lokal Anda ke repositori GitHub yang baru Anda buat:

    ```bash
    git remote add origin <URL_REPOSITORI_GITHUB_ANDA>
    ```

    Ganti `<URL_REPOSITORI_GITHUB_ANDA>` dengan URL repositori GitHub Anda.

5.  **Push Perubahan ke GitHub:**

    Push perubahan ke repositori GitHub Anda:

    ```bash
    git push -u origin main
    ```

    Ini akan mengirimkan semua file dan commit Anda ke repositori GitHub.

### **Step 4 â€” Konfigurasi GitHub Actions**

Sekarang, kita akan mengkonfigurasi GitHub Actions untuk otomatisasi build, pengujian, dan deployment.

1.  **Buat Direktori `.github/workflows`:**

    Buat direktori `.github/workflows` di direktori proyek Anda. Direktori ini akan menyimpan file workflow GitHub Actions Anda.

2.  **Buat File Workflow:**

    Buat file workflow bernama `main.yml` di dalam direktori `.github/workflows` dan tambahkan kode berikut:

    ```yaml
    name: CI/CD Pipeline

    on:
      push:
        branches: [ main ]
      pull_request:
        branches: [ main ]

    jobs:
      build:
        runs-on: ubuntu-latest
        steps:
          - uses: actions/checkout@v2
          - name: Set up Node.js
            uses: actions/setup-node@v2
            with:
              node-version: '16'
          - name: Install dependencies
            run: npm install
          - name: Run tests
            run: npm test

      deploy:
        needs: build
        runs-on: ubuntu-latest
        steps:
          - uses: actions/checkout@v2
          - name: Login to Docker Hub
            run: docker login -u ${{ secrets.DOCKERHUB_USERNAME }} -p ${{ secrets.DOCKERHUB_TOKEN }}
          - name: Build and push Docker image
            run: |
              docker build -t ${{ secrets.DOCKERHUB_USERNAME }}/node-app:${{ github.sha }} .
              docker push ${{ secrets.DOCKERHUB_USERNAME }}/node-app:${{ github.sha }}
          - name: Deploy to Heroku
            uses: akhileshns/heroku-deploy@v3.12.12 # This is the action
            with:
              heroku_api_key: ${{secrets.HEROKU_API_KEY}}
              heroku_app_name: "nama-aplikasi-heroku-anda" #Must be unique in Heroku
              heroku_email: "email-akun-heroku-anda"
              usedocker: true
    ```

    Mari kita bahas setiap bagian dalam file workflow:

    *   `name: CI/CD Pipeline`: Menentukan nama workflow.
    *   `on:`: Menentukan kapan workflow akan dijalankan. Dalam kasus ini, workflow akan dijalankan setiap kali ada push atau pull request ke branch `main`.
    *   `jobs:`: Menentukan serangkaian pekerjaan (jobs) yang akan dijalankan. Dalam kasus ini, kita memiliki dua jobs: `build` dan `deploy`.
        *   `build:`: Melakukan build dan pengujian aplikasi.
            *   `runs-on: ubuntu-latest`: Menentukan bahwa job akan dijalankan pada Ubuntu.
            *   `steps:`: Menentukan serangkaian langkah yang akan dijalankan.
                *   `uses: actions/checkout@v2`: Melakukan checkout kode dari repositori.
                *   `uses: actions/setup-node@v2`: Mengatur Node.js dengan versi yang ditentukan.
                *   `run: npm install`: Menginstal dependensi Node.js.
                *   `run: npm test`: Menjalankan pengujian.
        *   `deploy:`: Melakukan deployment aplikasi.
            *   `needs: build`: Menentukan bahwa job ini hanya akan dijalankan setelah job `build` berhasil diselesaikan.
            *   `runs-on: ubuntu-latest`: Menentukan bahwa job akan dijalankan pada Ubuntu.
            *   `steps:`: Menentukan serangkaian langkah yang akan dijalankan.
                *   `uses: actions/checkout@v2`: Melakukan checkout kode dari repositori.
                *   `name: Login to Docker Hub`: Login ke Docker Hub menggunakan username dan token yang disimpan sebagai secrets.
                *   `name: Build and push Docker image`: Membangun Docker image dan mengirimkannya ke Docker Hub.
                *   `name: Deploy to Heroku`: Melakukan deployment ke Heroku menggunakan API key, nama aplikasi, dan email akun Heroku yang disimpan sebagai secrets.

3.  **Tambahkan Secrets:**

    Kita perlu menambahkan beberapa secrets ke repositori GitHub kita untuk menyimpan informasi sensitif seperti username Docker Hub, token Docker Hub, dan API key Heroku.

    *   Buka repositori GitHub Anda dan klik `Settings`.
    *   Klik `Secrets` > `Actions`.
    *   Klik `New repository secret`.
    *   Tambahkan secrets berikut:
        *   `DOCKERHUB_USERNAME`: Username Docker Hub Anda.
        *   `DOCKERHUB_TOKEN`: Token Docker Hub Anda. Anda dapat membuat token di Docker Hub dengan masuk ke `Settings` > `Security` > `Access Tokens`.
        *   `HEROKU_API_KEY`: API key Heroku Anda. Anda dapat menemukan API key di akun Heroku Anda dengan masuk ke `Account Settings` dan menggulir ke bawah ke bagian `API Key`.
        *   `HEROKU_APP_NAME`: Nama aplikasi Heroku Anda.
        *   `HEROKU_EMAIL`: Email akun Heroku Anda.

4.  **Commit dan Push Perubahan:**

    Commit dan push file workflow ke repositori GitHub Anda:

    ```bash
    git add .
    git commit -m "Add GitHub Actions workflow"
    git push origin main
    ```

    GitHub Actions akan secara otomatis mendeteksi file workflow dan memulai pipeline CI/CD Anda.

    **Warning:** Pastikan Anda menyimpan secrets dengan aman dan tidak membagikannya dengan siapa pun. Secrets digunakan untuk mengotentikasi ke layanan eksternal seperti Docker Hub dan Heroku.

### **Step 5 â€” Memantau Pipeline CI/CD**

Anda dapat memantau pipeline CI/CD Anda di GitHub Actions.

*   Buka repositori GitHub Anda dan klik `Actions`.
*   Anda akan melihat daftar workflow runs.
*   Klik workflow run yang ingin Anda lihat.
*   Anda akan melihat detail workflow run, termasuk status setiap job dan langkah-langkah yang telah dijalankan.

Jika ada kesalahan, Anda dapat mengklik job atau langkah yang gagal untuk melihat log dan mencari tahu apa yang salah.

**Tip:** Anda dapat menambahkan badge status workflow ke README file Anda untuk menunjukkan status pipeline CI/CD Anda. Untuk melakukannya, klik `Create status badge` di halaman Actions.

### **Step 6 â€” Testing (Optional)**

Untuk aplikasi yang lebih kompleks, menambahkan unit test dan integration test sangat disarankan. Mari tambahkan contoh sederhana dengan Jest.

1.  **Install Jest:**

    ```bash
    npm install --save-dev jest
    ```

2.  **Update `package.json`:**

    Tambahkan script `test` ke `package.json`:

    ```json
    "scripts": {
      "start": "node index.js",
      "test": "jest"
    }
    ```

3.  **Buat file `index.test.js`:**

    ```javascript
    const request = require('supertest');
    const app = require('./index');

    describe('GET /', () => {
      it('responds with "Halo Dunia dari Node.js!"', (done) => {
        request(app)
          .get('/')
          .expect('Halo Dunia dari Node.js!', done);
      });
    });
    ```

4.  **Update Workflow:**

    Modifikasi workflow `main.yml` untuk menjalankan test:

    ```yaml
    name: CI/CD Pipeline

    on:
      push:
        branches: [ main ]
      pull_request:
        branches: [ main ]

    jobs:
      build:
        runs-on: ubuntu-latest
        steps:
          - uses: actions/checkout@v2
          - name: Set up Node.js
            uses: actions/setup-node@v2
            with:
              node-version: '16'
          - name: Install dependencies
            run: npm install
          - name: Run tests
            run: npm test
    ```

    Sekarang setiap kali kode di-push, GitHub Actions akan otomatis menjalankan test.

### **Step 7 â€” Deployment (Optional)**

Kita sudah mengkonfigurasi deployment ke Heroku. Alternatif lain termasuk:

*   **AWS Elastic Beanstalk:** Gunakan AWS Elastic Beanstalk untuk otomatis deployment ke AWS.
*   **Google Cloud Run:** Gunakan Google Cloud Run untuk deployment berbasis container ke Google Cloud.
*   **DigitalOcean App Platform:** Gunakan DigitalOcean App Platform untuk deployment sederhana dan terjangkau.

---

## ðŸ”§ Troubleshooting

Berikut adalah beberapa masalah umum yang mungkin Anda temui dan cara mengatasinya:

*   **Docker build fails:** Pastikan Dockerfile Anda benar dan semua dependensi yang diperlukan ada. Periksa log build untuk melihat pesan kesalahan.
*   **GitHub Actions workflow fails:** Periksa log workflow untuk melihat pesan kesalahan. Pastikan Anda telah menambahkan semua secrets yang diperlukan dan bahwa nilai-nilai tersebut benar.
*   **Deployment to Heroku fails:** Pastikan Anda telah mengkonfigurasi Heroku dengan benar dan bahwa aplikasi Anda dapat berjalan dengan benar di Heroku. Periksa log Heroku untuk melihat pesan kesalahan.

---

## âœ… Conclusion

Selamat! Anda telah berhasil membuat CI/CD pipeline menggunakan GitHub Actions dan Docker untuk aplikasi Node.js Anda. Sekarang Anda dapat mengotomatiskan build, pengujian, dan deployment aplikasi Anda dan meningkatkan produktivitas dan kualitas kode Anda. Semoga tutorial ini bermanfaat. Jangan ragu untuk bereksperimen dan memodifikasi pipeline Anda sesuai dengan kebutuhan Anda. Selamat mencoba! ðŸŽ‰
````